<!DOCTYPE html>
<html lang="en">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Digital Top Hat</title>
    <style>
        body {
            display: flex;
            margin: 0 auto;
        }

        #media {
            min-width: 1024px;
            width: 1024px;
            height: 256px;
            background-color: black;
        }

        #input {
            font-family: sans-serif;
            min-width: 256px;
            width: 256px;
            height: 256px;
            background-color: aliceblue;
            display: flex;
            flex-direction: column;
        }

        .selections {
            display: flex;
            height: calc(256px/5);
            width: 100%;
        }

        .selections > div {
            min-width: calc(256px/5);
            width: calc(256px/5);
            background-color: black;
        }

        .selections > div > span {
            background-color: black;
            color: white;
            padding: 0 5px;
        }

        #status {
            display: flex;
            flex-direction: column;
            height: calc(256px - calc(256px/5));
            width: 100%;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        #key {
            font-size: 100px;
        }

        #state {
            font-size: 25px;
        }
    </style>
</html>
<body>
    <div id="media"></div>
    <div id="input">
        <div class="selections">
            <div id="1"><span>1</span></div>
            <div id="2"><span>2</span></div>
            <div id="3"><span>3</span></div>
            <div id="4"><span>4</span></div>
            <div id="5"><span>5</span></div>
        </div>
        <div class="selections">
            <div id="6"><span>6</span></div>
            <div id="7"><span>7</span></div>
            <div id="8"><span>8</span></div>
            <div id="9"><span>9</span></div>
            <div id="0"><span>0</span></div>
        </div>
        <div id="status">
            <span id="key"></span>
            <span id="state"></span>
        </div>
    </div>
    <script>
        const acceptedInputs = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']
        var media = document.getElementById('media').style
        var key = document.getElementById('key')
        var confirmation = document.getElementById('confirm')
        var prevKey = ''
        var currentKey = ''
        
        const mediaData = {
            "1": [
                {"id": "1", "file": "1.gif", "audio": ""},
                {"id": "2", "file": "2.gif", "audio": ""},
                {"id": "3", "file": "3.gif", "audio": ""},
                {"id": "4", "file": "4.gif", "audio": ""},
                {"id": "5", "file": "5.gif", "audio": ""},
                {"id": "6", "file": "6.gif", "audio": ""},
                {"id": "7", "file": "7.png", "audio": ""},
                {"id": "8", "file": "8.png", "audio": ""},
                {"id": "9", "file": "9.png", "audio": ""},
                {"id": "0", "file": "10.gif", "audio": "10.mp3"}
            ],
            "2": [
                {"id": "1", "file": "11.png", "audio": ""},
                {"id": "2", "file": "12.png", "audio": ""},
                {"id": "3", "file": "13.png", "audio": ""},
                {"id": "4", "file": "14.png", "audio": ""},
                {"id": "5", "file": "15.png", "audio": ""},
                {"id": "6", "file": "16.png", "audio": ""},
                {"id": "7", "file": "17.png", "audio": ""},
                {"id": "8", "file": "18.png", "audio": ""},
                {"id": "9", "file": "19.png", "audio": ""},
                {"id": "0", "file": "20.png", "audio": ""}
            ] 
        }

        var mediaIndex = 1
        var mediaLibrary = mediaData[mediaIndex.toString()]

        function generatePreviews() {
            for (let i = 1; i < 11; i++) {
                var mediaElement = mediaLibrary[i - 1]
                document.getElementById(mediaElement.id).style.backgroundImage = 'url("media/' + mediaElement.file
                document.getElementById(mediaElement.id).style.backgroundSize = 'cover'
                document.getElementById(mediaElement.id).style.backgroundPosition = 'center'
            }
        }
        
        function reset() {
            prevKey = ''
            currentKey = ''
            key.innerHTML = ''
        }

        window.addEventListener('load', (event) => {
            generatePreviews()
        })

        window.addEventListener('keyup', (event) => {
            if (acceptedInputs.includes(event.key)) {
                key.innerHTML = event.key
                prevKey = currentKey
                currentKey = event.key
                state.innerHTML = "UNCONFIRMED"
                if (currentKey == prevKey) {
                    prevKey = ''
                }
            }
            else if (event.key == "Enter") {
                if (currentKey != prevKey) {
                    state.innerHTML = "CONFIRMED"
                    media.backgroundImage = 'url("media/' + currentKey + '.gif")'
                }
            }
            else if (event.key == "*") {
                prevKey = ''
                currentKey = ''
                key.innerHTML = '0'
                state.innerHTML = 'FULLSCREEN'
                media.backgroundImage = ''
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen()
                } 
            }
            else if (event.key == "/") {
                state.innerHTML = 'MEDIA SET<br>CHANGED'
                media.backgroundImage = ''
            }
            else if (event.key == ".") {
                reset()
                state.innerHTML = 'STREAM<br>STOPPED'
                media.backgroundImage = ''
            }
            else {
                reset()
                state.innerHTML = ''
            }
        })
    </script>
</body>
</html>